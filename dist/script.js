import{NumberFuncs,StringFuncs,DateFuncs,Dom,Fetch}from"./scripts/Funcs.js";let numFn=new NumberFuncs,strFn=new StringFuncs,dateFn=new DateFuncs,dom=new Dom,fetchFn=new Fetch,touches=(dom.setCopyright(),dom.selectAll(".touch")),stopBt=dom.select("#piano > p"),keys=["q","s","d","f","g","h","j","k","l","m","p"],sounds=await loadSounds(keys),sound;async function loadSounds(e){try{let s=await Promise.all(e.map(e=>Promise.resolve(new Audio(`./sounds/${e}.wav`)))),t={};return e.forEach((e,o)=>t[e]=s[o]),t}catch(e){return dom.error(e)}}function activeTouch(e){var o,e=e.key.toLowerCase();keys.includes(e)?(o=dom.select(`[data-key=${e}]`),dom.modClass(o,"active")):" "===e&&dom.modClass(stopBt,"active")}async function playSound(e){try{var o=e.key.toLowerCase();keys.includes(o)&&(touches.forEach(e=>dom.modClass(e,"active","del")),sound===sounds[o]?(sound.load(),await sound.play()):await(sound=sounds[o]).play())}catch(e){return dom.error(e)}}function stop(e){e=e.key.toLowerCase();if(" "===e){var o=Object.values(sounds);for(let e=0;e<o.length;e++)o[e].load();dom.modClass(stopBt,"active","del")}}addEventListener("keydown",activeTouch),addEventListener("keyup",playSound),addEventListener("keyup",stop);export{numFn,strFn,dateFn,dom,fetchFn};